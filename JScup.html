<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>TEMIYAGE｜現地受け取りサービス付き手土産オンラインサイト</title>
    <link href="https://use.fontawesome.com/releases/v5.6.1/css/all.css" rel="stylesheet">
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
  
  <!----------------------------------------
  HEADER
  ---------------------------------------->
  <header class="header">
    
    <!--------------------
    LOGO
    -------------------->
    <div class="logo">
      <a href="JScup.html">
       <img src="img/header_logo.jpg" alt="ロゴ">
      </a>
    </div>

    <!--------------------
    NAV
    -------------------->
    <nav class="nav">
      <ul>
        <li><a href="#favorite">お気に入り</a></li>
        <li><a href="#basket">買い物カゴ</a></li>
        <li><a href="#history">購入履歴</a></li>
        <li><a href="#sign-up" id="sign-up-blue">新規会員登録</a></li>
        <li><a href="#log-in" id="log-in-blue">ログイン</a></li>
      </ul>
    </nav>
  </header>

  <!----------------------------------------
  MAIN
  ---------------------------------------->
  <main>
  
    <!-----------------------
    TOP_IMAGE 
    ------------------------->
    <section class="top_image">
      <div>
        <h1>出張や帰省の手荷物を減らしてらくらく移動♪<br>
          駅や空港に売っていないご当地人気商品も手土産に🎁</h1>
        <h2>全国コンビニでの受け取りサービス付き手土産オンラインサイト<br>
          ”てみやげ”</h2>
      </div>
    </section>

    <!-----------------------
    MENU 
    ------------------------->
    <nav class="menu">
      <ul>
          <li><a href="#keyword">キーワードからえらぶ ▼</a></li>
          <li><a href="#situation">条件からえらぶ ▼</a></li>
          <li><a href="#local">ご当地からえらぶ ▼</a></li>
          <li><a href="#popular">人気商品からえらぶ ▼</a></li>
          <li><a href="#receivable">受け取れる場所をみる ▼</a></li>
      </ul>
    </nav>

    <!-----------------------
    キーワードからえらぶ 
    ------------------------->
    <section id="keyword">
      <h2 class="subtitle-h2">キーワードからえらぶ</h2>
      <div id="keyword-box">
        <input id="keyword-search" type="text" placeholder="種類、商品名、ご当地名など">
        <input id="keyword-button" type="submit" value="検索">
      </div>
    </section>

    <!-----------------------
    条件からえらぶ
    ------------------------->
    <section id="situation">
      <h2 class="subtitle-h2">条件からえらぶ</h2>
      <dl class="situation-inner" id="situation-top-border">
        <dt class="situation-title"> 🎁 種類からえらぶ</dt>
        <dd class="situation-item">
          <ul class="situation-ul">
            <li><label for="checkbox1"><input name="kinds" type="checkbox" class="selection">指定しない</label></li>
            <li><label for="checkbox2"><input name="kinds" type="checkbox" class="selection">お菓子</label></li>
            <li><label for="checkbox3"><input name="kinds" type="checkbox" class="selection">お惣菜（ドライフーズなど）</label></li>
            <li><label for="checkbox4"><input name="kinds" type="checkbox" class="selection">生もの（要冷蔵/冷凍）</label></li>
            <li><label for="checkbox5"><input name="kinds" type="checkbox" class="selection">飲みもの（アルコール）</label></li>
            <li><label for="checkbox6"><input name="kinds" type="checkbox" class="selection">飲みもの（アルコール以外）</label></li>
          </ul>
        </dd>
        <dt class="situation-title"> 🎁 味からえらぶ</dt>
        <dd class="situation-item">
          <ul class="situation-ul">
            <li><label for="checkbox1"><input name="taste" type="checkbox" class="selection">指定しない</label></li>
            <li><label for="checkbox2"><input name="taste" type="checkbox" class="selection">あまい</label></li>
            <li><label for="checkbox3"><input name="taste" type="checkbox" class="selection">しょっぱい</label></li>
            <li><label for="checkbox4"><input name="taste" type="checkbox" class="selection">からい</label></li>
          </ul>
        </dd>
        <dt class="situation-title"> 🎁 予算からえらぶ</dt>
        <dd class="situation-item">
          <ul class="situation-ul">
            <li><label for="checkbox1"><input name="budget" type="radio" class="selection">指定しない</label></li>
            <li><label for="checkbox2"><input name="budget" type="radio" class="selection">～1,000円未満</label></li>
            <li><label for="checkbox3"><input name="budget" type="radio" class="selection">～3,000円未満</label></li>
            <li><label for="checkbox4"><input name="budget" type="radio" class="selection">～5,000円未満</label></li>
            <li><label for="checkbox5"><input name="budget" type="radio" class="selection">～10,000円未満</label></li>
            <li><label for="checkbox6"><input name="budget" type="radio" class="selection">10,000円以上</label></li>
          </ul>
        </dd>
        <dt class="situation-title"> 🎁 その他</dt>
        <dd class="situation-item">
          <ul class="situation-ul">
            <li><label for="checkbox1"><input name="others" type="checkbox" class="selection">個包装あり</label></li>
            <li><label for="checkbox2"><input name="others" type="checkbox" class="selection">のし可能</label></li>
            <li><label for="checkbox3"><input name="others" type="checkbox" class="selection">おいそぎ（注文から3営業日以内OK）</label></li>
            <li><label for="checkbox4"><input name="others" type="checkbox" class="selection">環境配慮あり（紙包装のみなど）</label></li>
          </ul>
        </dd>
      </dl>    
      <h3 class="subtitle-h3">〇件の該当商品あり</h3>
      <input type="submit" value="検索結果を表示" class="btn">
    </section>

    <!-----------------------
    ご当地からえらぶ
    ------------------------->
    <section id="local">
      <h2 class="subtitle-h2">ご当地からえらぶ</h2>
      <dl class="local-inner">
        <dt class="local-title"> 🗾 地方</dt>
        <dd class="local-item">
          <select name="choice" class="local-parts">
            <option hidden>選択してください</option>
            <option value="北海道">北海道</option>
            <option value="東北">東北</option>
            <option value="関東">関東</option>
            <option value="中部">中部</option>
            <option value="関西">関西</option>
            <option value="中国">中国</option>
            <option value="四国">四国</option>
            <option value="九州・沖縄">九州・沖縄</option>
          </select>
        </dd>
        <dt class="local-title"> 🗾 都道府県</dt>
        <dd class="local-item">
          <select name="choice" class="local-parts">
            <option hidden>選択してください</option>
            <option value="茨城県">茨城県</option>
            <option value="栃木県">栃木県</option>
            <option value="群馬県">群馬県</option>
            <option value="埼玉県">埼玉県</option>
            <option value="千葉県">千葉県</option>
            <option value="東京都">東京都</option>
            <option value="神奈川県">神奈川県</option>
          </select>
        </dd>
        <dt class="local-title"> 🗾 都市</dt>
        <dd class="local-item">
          <select name="choice" class="local-parts">
            <option hidden>選択してください</option>
            <option value="23区内">23区内</option>
            <option value="23区外">23区外</option>
          </select>
        </dd>
      </dl>
      <h3 class="subtitle-h3">〇件の該当商品あり</h3>
      <input type="submit" value="検索結果を表示" class="btn">
    </section>

    <!-----------------------
    人気商品からえらぶ
    ------------------------->
    <section id="popular">
      <h2 class="subtitle-h2">人気商品からえらぶ</h2>    
      <div id="popular-container">
        <button id ="modoru" value="＜" type = "button" onclick = "modoru()">＜</button>
        <a href="#">
          <div id="popular-inner">
            <img src="img/tokyobanana.jpg">
            <p id="popular-inner-date">
              東京バナナ 【東京】
            </p>
            <p id="popular-inner-text">
              24個入り　個包装あり　2,400円
              <br> 29.2 x 24.2 x 4.4cm; 700g
            </p>
          </div>
        </a>
        <a href="#">
          <div id="popular-inner">
            <img src="img/yatsuhashi.jpg">
            <p id="popular-inner-date">
              生八ツ橋 【京都】
            </p>
            <p id="popular-inner-text">
              24個入り　個包装あり　2,400円
              <br> 29.2 x 24.2 x 4.4cm; 700g
            </p>
          </div>
        </a>
        <a href="#">
          <div id="popular-inner">
            <img src="img/shiroikoibito.jpg">
            <p id="popular-inner-date">
              白い恋人 【北海道】
            </p>
            <p id="popular-inner-text">
              24個入り　個包装あり　2,400円
              <br> 29.2 x 24.2 x 4.4cm; 700g
            </p>
          </div>
        </a>  
        <button id = "susumu" type = "button" onclick = "susumu()">＞</button>  
      </div>
      <input type="submit" value="人気商品をもっと見る" class="btn">
    </section>



    <!-----------------------
    受け取れる場所をみる
    ------------------------->
    <section id="receivable">
      <h2 class="subtitle-h2">受け取れる場所をみる</h2>
      <p>
        全国のコンビニ、宅配便センター、置き配ロッカーで商品が受け取れます。
        <br> 訪問先付近で受け取れる場所を簡単検索♪ 検索結果から商品の注文にも進めます。
      </p>
      <div id="receivable-container">
        <div id="myMap" style="position:relative;width:600px;height:500px;">
        </div>
        <div id="receivable-serch">
          <div id="address">
            <input id="address-search" type="text" placeholder="訪問先の住所から検索">
            <input id="address-button" type="submit" value="検索">
          </div>
          <div id="postcode">
            <input id="postcode-search" type="text" placeholder="訪問先の郵便番号から検索">
            <input id="postcode-button" type="submit" value="検索">
          </div>
          <div id="content">
            <!-- <ul>
              <li>タイトル
              </li>
            </ul> -->
          </div>
        </div>
      </div>
    </section>
  
  
  </main>

  <!----------------------------------------
  FOOTER
  ---------------------------------------->
  <footer class="footer">
    <a href="#" class="btn-pagetop"><span class="fa fa-angle-up icon-up"></span></a>
    <small>copyrights 2021 temiyage.com All Rights Reserved.</small>
  </footer>




  <!----------------------------------------
  SCRIPT
  ---------------------------------------->


  <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
  <script src="js/main.js">

  //親要素取得  
  var element = document.getElementById("popular-container");  
  
  //子要素を参照するための番号  
  var num = 0;

  function susumu() {
    if(num+1 < element.children.length) {
      var child = element.children[num+1];
      child.scrollIntoView({
        behavior:"smooth",  
        block:"nearest",  
        inline:"nearest",
      });num++;
    } else {
      return;
    }
  }

  function modoru() {
    if(num-1 >= 0) {
      var child = element.children[num-1];  
      child.scrollIntoView({
        behavior:"smooth",  
        block:"nearest",  
        inline:"nearest",
      }); num--;  
    } else {
      return;  
    }
  }
</script>

<!-- jQuery&GoogleMapsAPI -->
<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<!-- /jQuery&GoogleMapsAPI -->

<!-- javascript -->
<script src="https://www.bing.com/api/maps/mapcontrol?callback=GetMap&key=Aj9fBxUX5WdF3UT55SX_xCen5fbnd_LjspGjQRQqBH6zfg156wGZA29D3qVN1Dp2" async defer></script>
<script>
//Initialization processing
let map;
function GetMap() {
  let map = new Microsoft.Maps.Map('#myMap', {
      center: new Microsoft.Maps.Location(35.6754208, 139.7626623), //Location center position
  });

  //Get MAP Infomation
  let center = map.getCenter();

  //Create custom Pushpin
  let pin = new Microsoft.Maps.Pushpin(center, {
    color: 'red',            //Color
    draggable:true,          //MouseDraggable
    enableClickedStyle:true, //Click
    enableHoverStyle:true,   //MouseOver
    visible:true             //show/hide
  });

  //Add the pushpin to the map
  map.entities.push(pin);

}

//1．位置情報の取得に成功した時の処理
function mapsInit(position) {
    //lat=緯度、lon=経度 を取得
    // console.log(position);
    const lat = position.coords.latitude;
    const lon = position.coords.longitude;
    $("#view").text("緯度" + lat + "経度" + lon);
};

//2． 位置情報の取得に失敗した場合の処理
function mapsError(error) {
  let e = "";
  if (error.code == 1) { //1＝位置情報取得が許可されてない（ブラウザの設定）
    e = "位置情報が許可されてません";
  }
  if (error.code == 2) { //2＝現在地を特定できない
    e = "現在位置を特定できません";
  }
  if (error.code == 3) { //3＝位置情報を取得する前にタイムアウトになった場合
    e = "位置情報を取得する前にタイムアウトになりました";
  }
  alert("エラー：" + e);
};

//3.位置情報取得オプション
var set ={
  enableHighAccuracy: true, //より高精度な位置を求める
  maximumAge: 20000,        //最後の現在地情報取得が20秒以内であればその情報を再利用する設定
  timeout: 10000            //10秒以内に現在地情報を取得できなければ、処理を終了
};

//Main:位置情報を取得する処理 //getCurrentPosition :or: watchPosition
navigator.geolocation.getCurrentPosition(mapsInit, mapsError, set);

</script>




<!--受け取れる場所を見る-->
<script src="js/jquery-3.5.1.min.js"></script>
<script>
// 手順
// 1. $.get() を使って 情報を取得する
// 2. JSONデータ構造を基に本のタイトルを取得する
// 3. 本のタイトル情報をHTMLに出力する
// ---ここからは課題！
// 4. クリックイベントで括る
// 5. id="keyword"の入力値を取得 → URLの"?q=jquery"の"queryの文字を取得した入力値（変数）に変える"
// 6. 出版社も表示してみよう！（データ構造はconsole.logで確認！！）


// 『データ読み込み』ボタンのクリック
$("#address-button").on('click', GetDataFromGoogle);

// エンターキーの押下
$("#keyword").on("keydown", function (e) {
  if (e.keyCode === 13) {
    GetDataFromGoogle();
  }
});

// Googleから取得（クリック、エンターキー共に機能させるため、関数を設定
function GetDataFromGoogle() {
  const keyword = $("#address-search").val()
  $.get("https://www.googleapis.com/books/v1/volumes?q=" + keyword, function (data) {
    const items = data.items;
    
    // #contentの中身を定義
    let view = "";
    
    for (let i = 0; i < items.length; i++) {
      const item =items[i];
      const title = item.volumeInfo.title
      // console.log(item.volumeInfo.title);

    // 本ごとにタイトルと題名を追加
    for (let i = 0; i < items.length; i++) {
      const item = items[i];
      const title = item.volumeInfo.title;
      const publisher = item.volumeInfo.publisher;
      view += "<ul><li>題名 :" + title + "<br>" + "出版社：" + publisher + "</li></ul>";
    }

      view += "<ul><li>題名 ：" + title + " </li></ul>";
      // view = view + "<ul><li>題名 ：" + title + " </li></ul>";
    };
    
    $("#content").html(view);
  
  })
};
</script>

</body>

</html>